var mboxCurrent=mboxFactories.get('default').get('mBox-Release-PageSpecific',0);mboxCurrent.setEventTime('include.start');document.write('<div style="visibility: hidden; display: none" id="mboxImported-default-mBox-Release-PageSpecific-0">');document.write('<!-- Offer Id: 63658  --><style type=\"text\/css\">\r\n.sticky-panel-container {\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n.sticky-panel-container .stick-to-bottom {\r\n  bottom: 0;\r\n  top: auto;\r\n  position: absolute;\r\n}\r\n.sticky-panel-container .stick-to-top {\r\n  bottom: auto;\r\n  top: 0;\r\n  position: fixed;\r\n}\r\n.sticky-panel-container .release-sticky {\r\n  bottom: auto;\r\n  top: auto;\r\n  position: relative;\r\n}\r\n.sticky-panel-container .small-vp-bottom {\r\n  position: fixed;\r\n  bottom: 0;\r\n  top: auto;\r\n}\r\n<\/style>\r\n<script type=\"text\/javascript\">\r\nvar asos = asos || {};\r\nasos.mvt = asos.mvt || {};\r\n\r\n\r\nasos.mvt.StickyPanel = function (selectors) {\r\n\r\n\tthis.rootNode = $(selectors.refinements);\r\n\tthis.window = $(window);\r\n\r\n\tthis.rootNodeParent = this.rootNode.parent();\r\n\r\n\tif(this.createPanel()){\r\n\t\tthis.initialize();\r\n\t\t$(selectors.refinementHeader + \", \" + selectors.gridViewThreeControl + \", \" + selectors.gridViewFourControl).on(\"click\", this.initialize.bind(this, true));\r\n\t\t$(selectors.productList).on(\"DOMNodeInserted\", this.initialize.bind(this, true));\r\n\t}\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.createPanel = function () {\r\n\tif (this.rootNodeParent.hasClass(\'sticky-panel-container\')) {\t\t\t\r\n\t\t\treturn false;  \/\/As sticky panel is already added through some other code i.e search.\r\n\t}else {\t\t\t\r\n\t\tthis.rootNodeParent.addClass(\'sticky-panel-container\');\r\n\t\treturn true;\r\n\t}\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.initialize = function (topStart) {\t\r\n\tvar elementBottomVal = this.getElementBottomVal();\r\n\tif (topStart) {\r\n\t\tthis.resetRootNode();\r\n\t}\r\n\tthis.elementHeight = this.getElementHeight();\r\n\tthis.elementParentHeight = this.getElementParentHeight();\r\n\r\n\tthis.elementParentTopPos = this.getElementParentTopPos();\r\n\r\n\tthis.startTopPos = this.getElementTopPos();\r\n\tthis.lastScrollPos = this.getWinScrollTop();\r\n\r\n\tthis.shortVPTop = true;\r\n\r\n\tif (this.shouldScroll()) {\r\n\t\tthis.onWindowScroll();\r\n\t\tthis.bindEvents();\r\n\t\tthis.isViewportShort() && this.setElementBottomVal(elementBottomVal);\r\n\t} else {\r\n\t\tthis.unBindEvents();\r\n\t}\r\n};\r\nasos.mvt.StickyPanel.prototype.getElementBottomVal = function() {\r\n\treturn this.rootNode.css(\'bottom\');\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.setElementBottomVal = function(val) {\r\n\tif(this.rootNode.hasClass(\'small-vp-bottom\') && val !== \'auto\') {\r\n\t\tthis.rootNode.css(\'bottom\', val);\r\n\t}\r\n};\r\nasos.mvt.StickyPanel.prototype.bindEvents = function () {\r\n\tthis.unBindEvents(); \r\n\tthis.window.on(\'scroll.stickyPanel\', this.onWindowScroll.bind(this));\r\n\tthis.window.on(\'resize.stickyPanel\', this.onWindowResize.bind(this));\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.unBindEvents = function () {\r\n\tthis.window.off(\'scroll.stickyPanel\');\r\n\tthis.window.off(\'resize.stickyPanel\');\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.onWindowScroll = function () {\t\r\n\tif (this.isWithinBottomLimit()) {\r\n\t\tthis.fixAtBottom();\r\n\t} else if (this.isViewportShort()) {\r\n\t\tthis.scrollShortViewort();\r\n\t}\r\n\telse if (this.isWithinTopLimit()) {\r\n\t\tthis.fixAtTop();\r\n\t} else {\r\n\t\tthis.resetRootNode();\r\n\t}\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.onWindowResize = function() {\r\n\tthis.shortVPTop = true;\r\n\tthis.onWindowScroll();\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.resetRootNode = function () {\r\n\tthis.resetStyle();\r\n\tthis.rootNode.removeClass(\'stick-to-top stick-to-bottom small-vp-bottom\').addClass(\'release-sticky\');\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.fixAtTop = function () {\r\n\tthis.resetStyle();\r\n\tthis.rootNode.removeClass(\'stick-to-bottom release-sticky small-vp-bottom\').addClass(\'stick-to-top\');\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.fixAtBottom = function () {\r\n\tthis.resetStyle();\r\n\tthis.rootNode.removeClass(\'stick-to-top release-sticky small-vp-bottom\').addClass(\'stick-to-bottom\');\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.resetStyle = function() {\r\n\tthis.rootNode.css(\'bottom\', \'\');\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.getElementTopPos = function () {\r\n\treturn this.rootNode.offset().top;\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.getElementParentTopPos = function () {\r\n\treturn this.rootNodeParent.offset().top;\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.getElementHeight = function () {\r\n\treturn this.rootNode.outerHeight(true);\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.getElementParentHeight = function () {\r\n\treturn this.rootNodeParent.outerHeight(true);\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.isWithinTopLimit = function () {\r\n\treturn ((this.getWinScrollTop() - this.startTopPos) > 0);\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.isWithinBottomLimit = function () {\r\n\tvar isWithinLimit;\r\n\tif (this.isWithinTopLimitSmallVP()) {\r\n\t\tisWithinLimit = (this.elementParentTopPos + this.elementParentHeight - this.getWinScrollTop() - this.window.innerHeight() < 0);\r\n\t} else {\r\n\t\tisWithinLimit = (this.elementParentTopPos + this.elementParentHeight - this.getWinScrollTop() - this.elementHeight < 0);\r\n\t}\r\n\t\r\n\treturn isWithinLimit;\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.isWithinTopLimitSmallVP = function () {\r\n\treturn (this.isWithinTopLimit() && (this.window.innerHeight() - this.elementHeight) < 0);\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.getWinScrollTop = function () {\r\n\treturn this.window.scrollTop();\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.shouldScroll = function () {\r\n\treturn (parseInt(this.elementParentHeight - (this.elementHeight + this.getElementTopPos() - this.elementParentTopPos)) > 0);\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.scrollShortViewort = function() {\r\n   \r\n\tif (this.isWithinTopLimitSmallVP()) {\r\n\r\n\t\tif (!this.rootNode.hasClass(\'small-vp-bottom\')){\r\n\t\t\tthis.rootNode.addClass(\'small-vp-bottom\');\r\n\t\t}\r\n\r\n\t\tthis.rootNode.css({\r\n\t\t\t\'bottom\': this.getScrollAmount() + \'px\'\r\n\t\t});\r\n\r\n\t} else {\r\n\t\tthis.resetRootNode();\r\n\t}\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.isViewportShort = function () {\r\n\treturn this.window.innerHeight() < this.elementHeight;\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.getScrollAmount = function () {\r\n\tvar scrollLimit;\r\n\tvar bottomPos;\r\n\tvar scrollDifference;\r\n\tvar scrollAmount;\r\n        var browserStatusBarOffset = 10;\r\n\r\n\tscrollLimit = this.window.innerHeight() - this.elementHeight;\r\n\tbottomPos = parseInt(this.rootNode.css(\'bottom\'));\r\n\tscrollDifference = this.lastScrollPos - this.getWinScrollTop();\r\n\tscrollAmount = bottomPos - scrollDifference;\r\n\r\n\tif (this.isScrollingUp()) {\r\n\r\n\t\tif (scrollAmount <= scrollLimit) {\r\n\t\t\tscrollAmount = scrollLimit;\r\n\t\t}\r\n\r\n\t} else if (this.shortVPTop) {\r\n\r\n\t\tscrollAmount = scrollLimit;\r\n\t\tthis.shortVPTop = false;\r\n\r\n\t} else {\r\n\r\n\t\tif (scrollAmount >= browserStatusBarOffset) {\r\n\t\t\tscrollAmount = browserStatusBarOffset;\r\n\t\t}\r\n\t}\r\n\r\n\tthis.lastScrollPos = this.getWinScrollTop();\r\n\r\n\treturn scrollAmount;\r\n};\r\n\r\nasos.mvt.StickyPanel.prototype.isScrollingUp = function() {\r\n\treturn this.lastScrollPos > this.getWinScrollTop();\r\n};\r\n\r\n\r\n$(window).load(function(){\r\n   var layout_mode, selectors;\r\n   var elementSelectorsLayoutMap = {\r\n   \t  \"new\": {\r\n   \t  \t\"refinements\" : \".refinements\",\r\n   \t  \t\"refinementHeader\": \".refinement-header\",\r\n   \t  \t\"gridViewThreeControl\": \".display-options a[data-imagesize=\'xl\']\",\r\n   \t  \t\"gridViewFourControl\": \".display-options a[data-imagesize=\'l\']\",\r\n   \t  \t\"productList\" : \".product-list\"\r\n   \t  },\r\n   \t  \"old\": {\r\n   \t  \t\"refinements\": \".refine-controls\",\r\n   \t  \t\"refinementHeader\": \".toggleControl\",\r\n   \t  \t\"gridViewThreeControl\": \"#grid-view-threegrid\",\r\n   \t  \t\"gridViewFourControl\": \"#grid-view-fourgrid\",\r\n   \t  \t\"productList\" : \"#items-wrapper\"\r\n   \t  }\r\n   };\r\n\r\n   if($(\".frame\").length > 0){\r\n   \t\tlayout_mode = \"new\";\r\n   }else{\r\n   \t\tlayout_mode = \"old\";\r\n   }\t\r\n\r\n   selectors = elementSelectorsLayoutMap[layout_mode];\r\n\r\n   var stickyFacets = new asos.mvt.StickyPanel(selectors);\r\n});\r\n<\/script>');document.write('</div>');mboxCurrent.setEventTime('include.end');mboxFactories.get('default').get('mBox-Release-PageSpecific',0).loaded();mboxFactories.get('default').getPCId().forceId("1419704568643-423220.22_03");