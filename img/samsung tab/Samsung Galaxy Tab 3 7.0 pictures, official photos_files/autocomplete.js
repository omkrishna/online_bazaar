function confine(e,t,n){return Math.max(e,Math.min(t,n))}function autocompleteLoadList(){if(AUTOCOMPLETE_LIST!==null)return;AUTOCOMPLETE_LIST=false;var xhr;if(window.XMLHttpRequest){xhr=new XMLHttpRequest}else if(window.ActiveXObject){try{xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(x){try{xhr=new ActiveXObject("Microsoft.XMLHTTP")}catch(x){AUTOCOMPLETE_LIST=null}}}xhr.open("GET",AUTOCOMPLETE_LIST_URL,true);xhr.onreadystatechange=function(e){if(xhr.readyState==4)if(xhr.status==200){var data;if(window.JSON){data=JSON.parse(xhr.responseText)}else{data=eval("("+xhr.responseText+")")}AUTOCOMPLETE_MAKERS=data[0];AUTOCOMPLETE_LIST=data[1];if(typeof AUTOCOMPLETE_CALLBACK!="undefined")AUTOCOMPLETE_CALLBACK()}else{AUTOCOMPLETE_LIST=null}};xhr.send(null)}function Autocomplete(e,t,n){var r="autocomplete"+AUTOCOMPLETE_COUNT++;var i='<div id="'+r+'" class="autocomplete autocomplete-hide autocomplete-'+t+'"><ul></ul>'+'	<div class="autocomplete-more">';if(t==AUTOCOMPLETE_SEARCH){i+='		<strong class="aligncenter">Search for <em id="searchString"></em>&nbsp;in:</strong>'+"		<div>"+'			<a href="#" id="searchInNews" class="extraSearch">News</a>'+'			<a href="#" id="searchInReviews" class="extraSearch">Reviews</a>'+'			<a href="#" id="searchInPhones" class="extraSearch">Phones</a>'+"		</div>"}else{i+='		<div><a href="#" id="searchInPhones" class="extraSearch" style="margin: 0; width: 92%;">'+"more&gt;&gt;</a></div>"}i+="	</div>";i+="</div>";$(e).append(i);this.position=t;this.autocomplete=$("#"+r);this.list=$("#"+r+" ul");this.field=$("#"+n);this.searchInNews=this.autocomplete.find("#searchInNews");this.searchInReviews=this.autocomplete.find("#searchInReviews");this.searchInPhones=this.autocomplete.find("#searchInPhones");if(t==AUTOCOMPLETE_SEARCH){this.extraSearches=[this.searchInNews,this.searchInReviews,this.searchInPhones]}else{this.extraSearches=[this.searchInPhones]}this.searchForLabel=$("#searchString");this.maxLines=AUTOCOMPLETE_MAX_LINES;this.result=[];this.selected=-1;this.field.attr("autocomplete","off");this.field.keydown({self:this},function(e,t){if(AUTOCOMPLETE_DISABLED)return;var n=e.data.self;var r=$(e.target).val();if(e.which==KEY_ENTER){if(n.selected!=-1&&n.selected<n.result.length){window.location=n.makeURL(n.result[n.selected]);return false}else if(n.selected>=n.result.length){n.extraSearches[n.selected-n.result.length].click()}}else if(e.which==KEY_LEFT_ARROW&&n.selected!=-1){setTimeout(function(){e.target.selectionStart=e.target.selectionStart==0?0:e.target.selectionStart+1;e.target.selectionEnd=e.target.selectionStart},1)}else if(e.which==KEY_RIGHT_ARROW&&n.selected!=-1){setTimeout(function(){e.target.selectionStart=e.target.selectionStart==r.length?r.length:e.target.selectionStart-1;e.target.selectionEnd=e.target.selectionStart},1)}});this.field.keyup({self:this},function(e,t){if(AUTOCOMPLETE_DISABLED)return;autocompleteLoadList();var n=e.data.self;var r=$(e.target).val();if(e.which==KEY_UP_ARROW||e.which==KEY_LEFT_ARROW){if(e.which==KEY_LEFT_ARROW&&(n.autocomplete.hasClass("autocomplete-hide")||n.selected==-1)){return}n.setSelected(n.selected-1);return}else if(e.which==KEY_DOWN_ARROW||e.which==KEY_RIGHT_ARROW){if(e.which==KEY_RIGHT_ARROW&&(n.autocomplete.hasClass("autocomplete-hide")||n.selected==-1)){return}n.setSelected(n.selected+1);return}else if(e.which==KEY_ESCAPE){n.hide();return}if(r==""){n.hide()}else{n.searchForLabel.text('"'+r+'"');n.refreshList(r.toLowerCase())}});this.field.blur({self:this},function(e){var t=e.data.self;setTimeout(function(){t.hide()},200)});this.list.mouseout({self:this},function(e){var t=e.data.self;t.setSelected(-1);return false});this.list.find("a").on("mouseover",{self:this},function(e){var t=e.data.self;t.setSelected($(e.target).parents(".autocomplete li").attr("value"));return false});this.searchInNews.click(function(){$("#topsearch").attr("action","news.php3").submit();return false});this.searchInReviews.click(function(){$("#topsearch").attr("action","reviews.php3").submit();return false});this.searchInPhones.click({self:this},function(e){var t=e.data.self;if(t.position==AUTOCOMPLETE_SEARCH){$("#topsearch").attr("action","results.php3").submit()}else{t.field.parents("form").submit()}return false})}AUTOCOMPLETE_MAX_LINES=4;AUTOCOMPLETE_THUMB_URL="http://st2.gsmarena.com/vv/thumb/";KEY_LEFT_ARROW=37;KEY_RIGHT_ARROW=39;KEY_UP_ARROW=38;KEY_DOWN_ARROW=40;KEY_BACKSPACE=8;KEY_ESCAPE=27;KEY_ENTER=13;AUTOCOMPLETE_COUNT=1;AUTOCOMPLETE_SEARCH="search";AUTOCOMPLETE_LEFT="left";AUTOCOMPLETE_RIGHT="right";AUTOCOMPLETE_MAKERS=null;AUTOCOMPLETE_LIST=null;AUTOCOMPLETE_MAKERID=0;AUTOCOMPLETE_PHONEID=1;AUTOCOMPLETE_PHONE_NAME=2;AUTOCOMPLETE_SEARCH_STR=3;AUTOCOMPLETE_THUMB=4;AUTOCOMPLETE_DISABLED=false;Autocomplete.prototype.cleanURL=function(e){return e.toLowerCase().replace(/\s+|-|\/|\./g,"_")};Autocomplete.prototype.makeURL=function(e){if(this.position==AUTOCOMPLETE_SEARCH){var t=this.cleanURL(AUTOCOMPLETE_MAKERS[""+e[AUTOCOMPLETE_MAKERID]]);t+="_"+this.cleanURL(e[AUTOCOMPLETE_PHONE_NAME]);t+="-"+e[AUTOCOMPLETE_PHONEID]+".php";return t}else if(this.position==AUTOCOMPLETE_LEFT||this.position==AUTOCOMPLETE_RIGHT){var n,r;var i=window.location.href;if(this.position==AUTOCOMPLETE_LEFT){n=e[AUTOCOMPLETE_PHONEID];r=i.match(/idPhone2=(\d+)/);if(r){r=r[0].replace("idPhone2=","")}}else{n=i.match(/idPhone1=(\d+)/);if(n){n=n[0].replace("idPhone1=","")}r=e[AUTOCOMPLETE_PHONEID]}var t="compare.php3?";if(n)t+="idPhone1="+n;if(n&&r)t+="&";if(r)t+="idPhone2="+r;return t}else{return"http://gsmarena.com"}};Autocomplete.prototype.setList=function(e){if(AUTOCOMPLETE_DISABLED)return;this.list.empty();this.selected=-1;var t="";for(var n=0;n<e.length;n++){t+='<li value="'+n+'">';t+='<a href="'+this.makeURL(e[n])+'">';t+='<img src="'+AUTOCOMPLETE_THUMB_URL+e[n][AUTOCOMPLETE_THUMB]+'"><span>';t+=AUTOCOMPLETE_MAKERS[""+e[n][AUTOCOMPLETE_MAKERID]]+" "+e[n][AUTOCOMPLETE_PHONE_NAME];t+="</span></a></li>"}this.list.html(t)};Autocomplete.prototype.setSelected=function(e){if(e<-1){e=this.result.length+this.extraSearches.length-1}if(e>=this.result.length){if(e<this.result.length+this.extraSearches.length){this.list.find("li").removeClass("autocomplete-selected");this.autocomplete.find(".extraSearch").removeClass("autocomplete-more-selected");this.extraSearches[e-this.result.length].addClass("autocomplete-more-selected");this.selected=e;return}else{e=-1}}this.list.find("li").removeClass("autocomplete-selected");this.autocomplete.find(".extraSearch").removeClass("autocomplete-more-selected");if(e==-1){this.selected=-1;return}this.selected=confine(0,e,this.result.length);this.show();$(this.list.find("li")[this.selected]).addClass("autocomplete-selected")};Autocomplete.prototype.doMatch=function(e,t){if(e=="")return false;var n=e.split(/\s+/g);for(var r=0;r<n.length;r++){var i=n[r];if(i.match(/^[^0-9]/)){if(t.indexOf(i)!=0&&t.indexOf(" "+i)==-1)return false}else{if(t.indexOf(i)==-1)return false}}return true};Autocomplete.prototype.refreshList=function(e){if(AUTOCOMPLETE_DISABLED)return;e=$.trim(e).toLowerCase();if(e==="")return;var t=false;for(maker in AUTOCOMPLETE_MAKERS){var n=AUTOCOMPLETE_MAKERS[maker].toLowerCase();var r=e.substring(0,n.length).toLowerCase();if(n==r){if(t&&AUTOCOMPLETE_MAKERS[""+t].length>n.length)continue;t=parseInt(maker,10)}}if(t)e=$.trim(e.replace(AUTOCOMPLETE_MAKERS[""+t].toLowerCase(),""));var i=[];for(var s=0;s<AUTOCOMPLETE_LIST.length;s++){var o=AUTOCOMPLETE_LIST[s];if(t&&o[AUTOCOMPLETE_MAKERID]!=t)continue;var u=o[AUTOCOMPLETE_PHONE_NAME].toLowerCase();var a=o[AUTOCOMPLETE_SEARCH_STR].toLowerCase();if(e===""||this.doMatch(e,u)||this.doMatch(e,a))i.push(o);if(i.length==AUTOCOMPLETE_MAX_LINES)break}this.show();this.result=i;this.setList(i)};Autocomplete.prototype.hide=function(){this.autocomplete.addClass("autocomplete-hide")};Autocomplete.prototype.show=function(){if(AUTOCOMPLETE_DISABLED)return;this.autocomplete.removeClass("autocomplete-hide")};$(document).ready(function(){var e=new Autocomplete("#topsearch",AUTOCOMPLETE_SEARCH,"topsearch-text");AUTOCOMPLETE_CALLBACK=function(){if(e.field.val()!==""&&e.field.val()!=="Quick phone search"){e.refreshList(e.field.val().toLowerCase())}};if(AUTOCOMPLETE_LIST&&e.field.val()!==""&&e.field.val()!=="Quick phone search"){e.refreshList(e.field.val().toLowerCase())}})